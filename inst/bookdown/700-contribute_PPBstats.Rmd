# Contribute to `PPBstats` {#contributions}

You can contribute to `PPBstats` in four ways:

- test `PPBstats` and its vignette and report bugs
- translate
- resolve open issues
- add new functions 


Any how, send me an email to see how we can collaborate !

## Test and report bugs

First, load the development version:

```{r, eval=FALSE}
devtools::install_github("priviere/PPBstats")
```


The easiest way to start is to look at the vignette to know how the package works.

You can download the vignette [here](https://github.com/priviere/PPBstats/releases/download/v0.22/PPBstats.pdf).
Do not hesitate to let a message [in the issues](https://github.com/priviere/PPBstats/issues).

- some points are not clear in the vignette or you find bugs
- you find bugs with your data (If so, you can send it to me so that I can see
where could be the problems)

## Translate

The package is in english. 
Every contributions to other languages are welcome!
More informations on R package translation [here](http://developer.r-project.org/Translations30.html).

## Resolve open issues

Do not hesitate to contribute to open [in the issues](https://github.com/priviere/PPBstats/issues).

## Add new functions

If you have any ideas, 

- on the improvement of the current package (graph or table for example)
- on new functions that may be useful in the analysis found within PPB programmes regarding network of seeds circulation, agronomic trials, organoleptic tests and molecular experiments.
- ...

even if it is not R written, send me an email and we'll see how we can work together!

If you wish to add a new model, you should follow different steps :

- create the model function
```{r}
my_model <- function(...){
  ...
  ...
  ...
  class(out) = c("PPBstats", "fit_my_model")
  return(out)
  }
```

- create the `fit_my_model` method for `check_model()`
```{r}
check_model.fit_my_model <- function(x){
  ...
  ...
  ...
  class(out) <- c("PPBstats", "check_my_model")
  return(out)
  }
```

- create the check\_my\_model method for `mean_comparisons()`
```{r}
mean_comparisons.check_my_model <- function(x, ...){
  ...
  ...
  ...
  class(out) <- c("PPBstats", "mean_comparisons_my_model")
  return(out)
  }
```

- create the `mean_comparisons_my_model` method for `plot()`
```{r}
plot.mean_comparisons_my_model <- function(x, y, ...){
  ...
  ...
  ...
  }
```


## How to contribute

- If you want to interact with us, please file an issue first to share your intentions. We can help you plan the curse of action.
- Fork the git repository
- Include your contributions in your fork (preferably in a specific branch)
- Update the documentation if necessary (help files, `inst/bookdown` file)
-Write unit tests for your functions, if any
- Pull the latest changes in the `master` branch of the upstream repository and rebase your work on top of them.
- Run all tests and compile the vignette. Make sure everything works as
expected.
- Send a Pull Request with a reference to the original issue


## Internal function structure

The internal function used in `PPBstats` are presented in Figure \@ref(fig:workflow-2-1) and  \@ref(fig:workflow-2-2) and Table \@ref(tab:function-descriptions-workflow-2). 
Note that one additional funtion is also defined in the package: `common_functions` which gather some functions used in several functions of `PPBstats`.


```{r workflow-2-1, out.width='100%', fig.align='center', echo=FALSE, fig.cap="Internal functions used within main functions (1/2)"}
knitr::include_graphics("figures/PPBstats-secondary-functions-1.png")
```

```{r workflow-2-2, out.width='100%', fig.align='center', echo=FALSE, fig.cap="Internal functions used within main functions (2/2)"}
knitr::include_graphics("figures/PPBstats-secondary-functions-2.png")
```


| function name | description |
| --- | --- |
| `get.env.info` | Get regional farms data and satellite farms data |
| `GxE\_build\_interaction\_matrix` | Compute interaction matrix |
| `check\_model.fit\_model\_1` | Check if the `model\_1` model went well  |
| `check\_model.fit\_model\_2` | Check if the `model\_2` model went well |
| `check\_model.fit\_model\_GxE` | Check if the `GxE` model went well |
| `check\_model.fit\_model\_spatial` | Check if the `spatial` model went well |
| `check\_model.fit\_model\_variance\_intra` | Check if the `model\_variance\_intra` model went well |
| `parameter\_groups\_GxE` | Get matrix with variables in column and effect in row from `check\_modelfit\_model\_GxE` |
| `parameter\_groups\_model\_2` | Get matrix with variables in column and effect in row from `check\_model.fit\_model\_2` |
| `comp.parameters` | Get parameter comparisons two by two or to a given threshold based on MCMC outputs |
| `get.significant.groups` | Get significant groups of differences for a set of parameters based on MCMC outputs |
| `get.at.least.X.groups` | Get the value of type one error needed to have X groups |
| `mean\_comparisons.check\_model\_GxE` | Get mean comparisons from `check\_model.fit\_model\_GxE` |
| `mean\_comparisons.check\_model\_1` | Get mean comparisons from `check\_model.fit\_model\_1` |
| `mean\_comparisons.check\_model\_2` |Get mean comparisons from `check\_model.fit\_model\_2`  |
| `mean\_comparisons.check\_model\_spatial` | Get mean comparisons from `check\_model.fit\_model\_spatial`  |
| `mean\_comparisons.check\_predict\_the\_past\_model\_2` | Get mean comparisons from `predict\_the\_past\_model\_2` |
| `mean\_comparisons.check\_model\_variance\_intra` | Get mean comparisons from `check\_model.fit\_model\_variance\_intra` |
| `plot.parameter\_groups` | Get ggplot from `parameter\_groups` |
| `plot.check\_model\_GxE` | Get ggplot from `check\_model.fit\_model\_GxE` |
| `plot.check\_model\_model\_1` | Get ggplot from `check\_model.fit\_model\_1` |
| `plot.check\_model\_model\_2` | Get ggplot from `check\_model.fit\_model\_2` |
| `plot.check\_model\_model\_spatial` | Get ggplot from `check\_model.fit\_model\_spatial` |
| `plot.check\_model\_variance\_intra` | Get ggplot from `check\_model.fit\_model\_variance\_intra` |
| `plot.cross\_validation\_model\_2` | Get ggplot from `cross\_validation\_model\_2` |
| `plot.mean\_comparisons\_GxE` | Get ggplot from `mean\_comparisons.check\_model\_GxE` |
| `plot.mean\_comparisons\_model\_1` | Get ggplot from `mean\_comparisons.check\_model\_1` |
| `plot.mean\_comparisons\_model\_2` | Get ggplot from `mean\_comparisons.check\_model\_2` |
| `plot.mean\_comparisons\_predict\_the\_past\_model\_2` | Get ggplot from `mean\_comparisons.predict\_the\_past\_model\_2` |
| `plot.mean\_comparisons\_model\_variance\_intra` | Get ggplot from `mean\_comparisons.check\_model\_variance\_intra` |
| `plot.biplot\_GxE` | Get ggplot from `biplot\_GxE` |
| `ggplot\_discrimitiveness\_vs\_representativeness` | Get "discrimitiveness vs representativeness" ggplot from PCA on interaction matrix |
| `ggplot\_mean\_vs\_stability` | Get "mean vs stability" ggplot from PCA on interaction matrix |
| `ggplot\_which\_won\_where` | Get "which won where" ggplot from PCA on interaction matrix |
Table: (\#tab:function-descriptions-workflow-2) Name and description of internal functions.

